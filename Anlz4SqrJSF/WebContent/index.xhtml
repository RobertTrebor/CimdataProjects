<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<script src="http://maps.google.com/maps/api/js?sensor=false"
		type="text/javascript"></script>
</h:head>

<h:body>
	<p:layout fullPage="true">
		<p:layoutUnit position="north" size="50">
			<h:outputText value="Top content." />
		</p:layoutUnit>
		<p:layoutUnit position="south" size="100">
			<h:outputText value="Bottom content." />
		</p:layoutUnit>
		<p:layoutUnit position="west" size="300">
			<h:outputText value="Left content" />
		</p:layoutUnit>
		<p:layoutUnit position="east" size="200">
			<h:outputText value="Right Content" />
		</p:layoutUnit>
		<p:layoutUnit position="center">
			<h:outputText value="Center Content" />
		</p:layoutUnit>
	</p:layout>


	<h1>Analyze Foursquare</h1>

	<p:ajaxStatus
		style="width:64px;height:64px;position:fixed;top:5px;left:5px">
		<f:facet name="start">
			<p:graphicImage library="img" name="ajax-loader.gif" />
		</f:facet>

		<f:facet name="complete">
			<h:outputText value="" />
		</f:facet>
	</p:ajaxStatus>

	<p:panel>
		<h:form>
			<p:growl id="messages" showDetail="true" life="2000" />

			<p:gmap center="#{mapBean.coordinates}" zoom="15" type="HYBRID"
				style="width:800px;height:300px" model="#{mapBean.model}">
				<p:ajax event="stateChange" listener="#{mapBean.onStateChange}"
					update="messages" />
				<p:ajax event="pointSelect" listener="#{mapBean.onPointSelect}"
					update="messages" />
				<p:ajax event="pointSelect" update=":coordinates" />
			</p:gmap>
		</h:form>
	</p:panel>


	<p:panel id="coordinates">
		<h:form>
			<h:outputLabel value="Latitude: "></h:outputLabel>
			<h:inputText value="#{mapBean.latitude}"></h:inputText>
			<h:outputLabel value="Longitude: "></h:outputLabel>
			<h:inputText value="#{mapBean.longitude}"></h:inputText>
			<h:outputText value="Query: "></h:outputText>
			<h:inputText value="#{basicBean.query}"></h:inputText>

			<p:commandButton actionListener="#{basicBean.loadResult}"
				value="View Venues" update=":venuetable" />
		</h:form>
	</p:panel>
	<!-- #################New Stuff#################### -->

	<!--
		<p:ajax event="loadvenues" listener="#{weatherBean.loadCityList}"
			update=":tablepanel">
		</p:ajax>
	-->

	<p:panel>
		<h:form id="tree">
			<p:tree id="tree" value="#{categoriesController.root}" var="node">
				<p:treeNode id="treeNode">
					<h:outputText value="#{node}" id="lblNode" />
				</p:treeNode>
			</p:tree>
		</h:form>
	</p:panel>


	<p:panel id="venuetable">
		<h:form id="form">
			<p:dataTable var="venue" value="#{basicBean.venues}"
				rowKey="#{venue.name}" paginator="true" rows="15"
				selection="#{basicBean.selectedVenue}" selectionMode="single">

				<!--   filteredValue="#{tableBean.filteredCars}" id="carsTable">  -->

				<p:ajax event="rowSelect" update=":form:display"
					oncomplete="venueDialog.show()" />

				<f:facet name="header">Venue List</f:facet>

				<p:column headerText="Name" sortBy="name" filterBy="name" id="name">  
            		#{venue.name}  
        		</p:column>

				<p:column headerText="Address" sortBy="address" filterBy="address"
					id="address">  
            		#{venue.location.address}  
        		</p:column>

				<p:column headerText="City" sortBy="city" filterBy="city" id="city">  
            		#{venue.location.city}  
        		</p:column>
			</p:dataTable>

			<p:dialog header="Venue Details" widgetVar="venueDialog"
				resizable="false" width="400" showEffect="explode"
				hideEffect="explode">

				<h:panelGrid id="display" columns="2" cellpadding="4">

					<f:facet name="header">
						<!--<p:graphicImage value="/images/cars/#{tableBean.selectedCar.manufacturer}.jpg"/> -->
					</f:facet>

					<h:outputText value="Name:" />
					<h:outputText value="#{basicBean.selectedVenue.name}" id="name" />

					<h:outputText value="Address:" />
					<h:outputText value="#{basicBean.selectedVenue.location.address}"
						id="address" />

					<h:outputText value="Zip:" />
					<h:outputText
						value="#{basicBean.selectedVenue.location.postalCode}"
						id="postalCode" />

					<h:outputText value="City:" />
					<h:outputText value="#{basicBean.selectedVenue.location.city}"
						id="city" />

				</h:panelGrid>
			</p:dialog>

		</h:form>
	</p:panel>
</h:body>
</html>